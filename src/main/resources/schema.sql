CREATE TABLE IF NOT EXISTS GENRES (
    ID_GENRES INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NAME_GENRES varchar(100) NOT NULL
);

CREATE TABLE IF NOT EXISTS MPA (
    ID_MPA INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NAME_MPA varchar(255) NOT NULL
);

CREATE TABLE IF NOT EXISTS FILMS (
    ID_FILMS INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NAME_FILMS varchar(100) NOT NULL,
    DESCRIPTION varchar(200) NOT NULL,
    RELEASE_DATE datetime,
    DURATION int NOT NULL,
    MPA INTEGER REFERENCES MPA (ID_MPA)
);

CREATE TABLE IF NOT EXISTS FILM_GENRES (
    FILM_ID INTEGER REFERENCES FILMS (ID_FILMS) ON DELETE CASCADE,
    GENRE_ID INTEGER REFERENCES GENRES (ID_GENRES)
);

CREATE TABLE IF NOT EXISTS USERS (
    ID_USER  INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    EMAIL varchar NOT NULL,
    LOGIN varchar(100) NOT NULL,
    NAME_USER varchar(255),
    BIRTHDAY datetime
);

CREATE TABLE IF NOT EXISTS "LIKE" (
  FILM_ID INTEGER REFERENCES FILMS (ID_FILMS) ON DELETE CASCADE,
  USER_ID INTEGER REFERENCES USERS (ID_USER) ON DELETE CASCADE
);

--CREATE TABLE IF NOT EXISTS STATUS (
    --ID_STATUS INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    --TITLE varchar(100) NOT NULL DEFAULT 'не подтвержденна'
--);


CREATE TABLE IF NOT EXISTS FRIENDS (
  USER_ID INTEGER REFERENCES USERS (ID_USER) ON DELETE CASCADE,
  OTHER_ID INTEGER REFERENCES USERS (ID_USER) ON DELETE CASCADE,
  STATUS varchar(100) NOT NULL DEFAULT 'не подтвержденна'
);

